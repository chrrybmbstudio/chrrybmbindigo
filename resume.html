<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>resume â€” denisa jomo</title>

  <!-- Base site CSS first -->
  <link rel="stylesheet" href="./style.css" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;600;700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Funnel+Display:wght@300..800&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Jacquarda+Bastarda+9&display=swap" rel="stylesheet">

  <!-- Page-scoped styles (wins over style.css) -->
  <style>
    /* ---------- Page palette / basics ---------- */
    .page-resume{
      --indigo:#4440ff; --pink:#ffe9ff; --ink:#0e0f1a; --cardR: clamp(18px,1.6vw,26px);
      background:
        radial-gradient(60% 60% at var(--orb-x,72%) var(--orb-y,68%), rgba(68,64,255,.13), transparent 60%),
        linear-gradient(180deg, #ffffff, #faf9ff);
      color:var(--ink);
      -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
    }

    /* ---------- Hero ---------- */
    .resume-hero{ position:relative; padding: clamp(20px,6vw,56px) 20px 8px; text-align:center; }
    .resume-hero .hero-inner{ max-width:min(1100px,92vw); margin-inline:auto; position:relative; z-index:0; }
    .resume-hero .hero-inner::before{
      content:""; position:absolute; inset:-12% -14% -18% -14%; z-index:-1; pointer-events:none;
      background:
        radial-gradient(72% 100% at 30% 40%, rgba(68,64,255,.28), transparent 60%),
        radial-gradient(64% 80% at 70% 60%, rgba(255,233,255,.38), transparent 60%);
      filter: blur(28px) saturate(120%); opacity:.9; animation: floatBlob 24s ease-in-out infinite alternate;
    }
    @keyframes floatBlob{ 0%{ transform:translateY(0) rotate(0) scale(1)} 100%{ transform:translateY(-6px) rotate(6deg) scale(1.02)} }

    /* Title treatment (matches brand) */
    .name-edge{
      --text:#0e0f1a;
      font-family:"Funnel Display", system-ui, sans-serif;
      font-weight:600; font-size:clamp(42px,8vw,72px);
      letter-spacing:-.02em; line-height:.92; margin:0 0 6px;
      text-transform:lowercase; position:relative; display:inline-block;
      color:var(--text); filter:url(#softWobble); isolation:isolate;
    }
    .name-edge::after{
      content:attr(data-text);
      position:absolute; inset:0; z-index:-1; pointer-events:none;
      background: conic-gradient(from 0deg, var(--indigo), var(--pink) 40%, #8aaaff, var(--indigo));
      -webkit-background-clip:text; background-clip:text; color:transparent;
      transform: scale(1.04); filter: blur(6px) saturate(125%); opacity:.75; mix-blend-mode: plus-lighter;
    }
    .name-edge .warp,.name-edge .prism{
      position:absolute; inset:0; display:inline-block;
      -webkit-mask-image: linear-gradient(90deg, transparent 0%, #000 35%, #000 65%, transparent 100%);
              mask-image: linear-gradient(90deg, transparent 0%, #000 35%, #000 65%, transparent 100%);
      -webkit-mask-size: 220% 100%; mask-size: 220% 100%;
      -webkit-mask-position: -60% 0; mask-position: -60% 0; -webkit-mask-repeat:no-repeat; mask-repeat:no-repeat;
    }
    .name-edge .warp{ z-index:1; color:var(--text); -webkit-text-fill-color:currentColor; filter:url(#lensWarp); }
    .name-edge .prism{
      z-index:2; mix-blend-mode:screen; opacity:.55; filter: blur(.6px) saturate(120%);
      background: linear-gradient(90deg, #7ff0ff 0%, #ff6adf 50%, #7ff0ff 100%);
      -webkit-background-clip:text; background-clip:text; color:transparent; transform: translateX(.4px);
    }
    @keyframes sweepBand{ from{ -webkit-mask-position:-60% 0; mask-position:-60% 0 } to{ -webkit-mask-position:160% 0; mask-position:160% 0 } }
    @media (min-width:641px){ .name-edge .warp, .name-edge .prism{ animation: sweepBand 7s cubic-bezier(.45,.05,.36,1) infinite alternate; } }
    @media (max-width:640px){ .name-edge .warp, .name-edge .prism{ animation: sweepBand 3.2s cubic-bezier(.5,.1,.2,1) 1 both; } }
    @media (prefers-reduced-motion: reduce){ .name-edge .warp, .name-edge .prism{ animation:none !important } }

    .resume-sub{ margin:6px 0 26px; font:400 clamp(16px,2.4vw,20px)/1.2 "Jacquarda Bastarda 9", serif; opacity:.82; }

    /* ---------- Card + PDF ---------- */
    .resume-wrap{ max-width: 980px; margin: 0 auto calc(18px + 14svh); padding-inline: 12px; }
    .card-iris{
      position:relative; width:min(92vw, 640px); margin: 0 auto;
      border-radius: var(--cardR); background:#fff;
      box-shadow:0 18px 54px rgba(68,64,255,.10), 0 3px 12px rgba(0,0,0,.06);
      isolation:isolate;
    }
    .card-iris::before{
      content:""; position:absolute; inset:-1px; border-radius:inherit; padding:1px;
      background:conic-gradient(from var(--b,0deg), var(--indigo), var(--pink) 40%, #a8a3ff, var(--indigo));
      --mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      -webkit-mask: var(--mask); -webkit-mask-composite:xor; mask-composite:exclude;
      animation: spin 14s linear infinite; pointer-events:none;
    }
    @keyframes spin{to{--b:360deg}}

    /* Slightly smaller viewport for the PDF + room for footer */
    .pdf-scroller{
      --h: clamp(56svh, 68svh, 78svh);
      height: var(--h);
      overflow:auto; border-radius:inherit; background:#fff; scroll-behavior:smooth; position:relative;
    }
    .pdf-scroller{ scrollbar-color: var(--indigo) rgba(68,64,255,.08); scrollbar-width: thin }
    .pdf-scroller::-webkit-scrollbar{ width:10px }
    .pdf-scroller::-webkit-scrollbar-track{ background: rgba(68,64,255,.06) }
    .pdf-scroller::-webkit-scrollbar-thumb{ background: linear-gradient(180deg, var(--indigo), #8aa3ff) }
    .pdf-scroller::after{ content:""; position:absolute; left:0; top:0; width:4px; height:var(--prog,0%); background: linear-gradient(180deg, var(--indigo), var(--pink)); border-radius:0 6px 6px 0 }

    .pdf-page{ display:block; width:100%; height:auto; background:#fff; margin:0 auto; box-shadow:0 1px 0 rgba(0,0,0,.05) }

    /* ---------- Pixel-mini buttons (brand-consistent) ---------- */
    :root{ --px-font: "Funnel Display", system-ui, sans-serif; }
    .btn-pixel{
      --px: 10.5px; --px-track: .16em;
      display:inline-flex; align-items:center; justify-content:center; gap:.5ch;
      padding: 8px 12px; border-radius: 10px;
      font: 800 var(--px)/1 var(--px-font); text-transform: uppercase; letter-spacing: var(--px-track);
      background: linear-gradient(180deg, #ffffff, #f6f6ff);
      border: 1px solid #1f22ff; color:#17182a;
      box-shadow: 0 0 0 1px rgba(68,64,255,.08) inset, 0 6px 18px rgba(68,64,255,.12);
      transition: transform .12s ease, box-shadow .12s ease, filter .12s ease;
      text-decoration:none; cursor:pointer; user-select:none;
    }
    .btn-pixel:hover{ transform: translateY(-0.5px); box-shadow: 0 0 0 1px rgba(68,64,255,.10) inset, 0 10px 22px rgba(68,64,255,.18); }
    .btn-pixel:active{ transform: translateY(0); filter: saturate(105%); }
    .btn-pixel--ghost{ background: transparent; color:#2a2f45; border:1px solid #5a57ff; box-shadow:none; }
    .btn-pixel:focus-visible{ outline:2px solid #5a57ff; outline-offset:2px; }

    /* Toolbar layout with intention */
    .resume-actions{
      display:flex; align-items:center; justify-content:center; flex-wrap:wrap;
      gap: 8px 10px; padding: 10px 12px 12px;
      border-top: 1px solid rgba(0,0,0,.04);
      background: linear-gradient(180deg,#fff,rgba(255,255,255,.9));
      border-radius: 0 0 var(--cardR) var(--cardR);
    }
    .tool-group{
      display:inline-flex; gap:8px; padding: 6px; border-radius: 12px;
      background: rgba(68,64,255,.04);
      box-shadow: inset 0 0 0 1px rgba(68,64,255,.06);
    }
    .tool-spacer{ width:14px; height:1px; opacity:0; }  /* keeps visual rhythm if group wraps */

    /* Glass footer (already global, kept here for specificity if needed) */
    .glass-footer{
      position:fixed; left:0; right:0; bottom:0; z-index:20; display:flex; align-items:center; justify-content:center; gap:14px;
      padding:10px 14px; margin:10px; border-radius:16px; background: rgba(255,255,255,.35);
      backdrop-filter: blur(10px) saturate(135%) contrast(105%); -webkit-backdrop-filter: blur(10px) saturate(135%) contrast(105%);
      box-shadow: 0 10px 30px rgba(68,64,255,.12);
      -webkit-mask-image: radial-gradient(120% 120% at 50% 0%, #000 40%, rgba(0,0,0,.85) 72%, transparent 100%);
              mask-image: radial-gradient(120% 120% at 50% 0%, #000 40%, rgba(0,0,0,.85) 72%, transparent 100%);
    }
    .glass-footer a{font:600 14px/1 "DM Sans"; color:#1b1e35; text-decoration:none}
    .glass-footer .dot{width:6px; height:6px; border-radius:50%; background:linear-gradient(90deg,var(--indigo),#8aa3ff)}

    /* Compact density (same vibe as home) */
    .page-resume.density-xs{ --ui:.66 }
    .page-resume .name-edge{ font-size: calc(var(--ui) * clamp(42px,8vw,72px)); }
    .page-resume .resume-sub{ font-size: calc(var(--ui) * clamp(16px,2.4vw,20px)); }
    .page-resume .card-iris{ width: min(62vw, 520px); }
    .page-resume .pdf-scroller{ --h: clamp(54svh, 64svh, 76svh); }

    /* Mobile polish */
    @media (max-width: 520px){
      .page-resume .card-iris{ width:min(94vw,560px); }
      .btn-pixel{ --px: 10px; padding: 8px 10px; }
      .tool-group{ padding:5px; gap:6px; }
      .resume-wrap{ margin-bottom: calc(16px + 18svh); }
    }

    @media (prefers-reduced-motion: reduce){
      .name-edge::after, .card-iris::before{ animation:none }
      .pdf-scroller{ scroll-behavior:auto }
    }

    .resume-cta {
      display: flex;
      justify-content: center;
      margin-top: 40px;
    }
  </style>
</head>

<body class="page-resume density-xs">
  <!-- SVG defs FIRST -->
  <svg aria-hidden="true" focusable="false" style="position:absolute;width:0;height:0;overflow:hidden">
    <filter id="softWobble" x="-50%" y="-50%" width="200%" height="200%">
      <feTurbulence type="fractalNoise" baseFrequency="0.008" numOctaves="1" seed="11" result="noise">
        <animate attributeName="baseFrequency" dur="14s" values="0.008;0.010;0.008" repeatCount="indefinite" />
      </feTurbulence>
      <feDisplacementMap in="SourceGraphic" in2="noise" scale="3" xChannelSelector="R" yChannelSelector="G"/>
    </filter>
    <filter id="lensWarp" x="-50%" y="-50%" width="200%" height="200%" filterUnits="objectBoundingBox" color-interpolation-filters="sRGB">
      <feTurbulence type="fractalNoise" baseFrequency="0.0025 0.002" numOctaves="1" seed="5" result="turb"/>
      <feGaussianBlur in="turb" stdDeviation="14" result="soft"/>
      <feDisplacementMap in="SourceGraphic" in2="soft" scale="12" xChannelSelector="R" yChannelSelector="G"/>
    </filter>
  </svg>

  <!-- Header / Nav -->
  <header class="site-header" role="banner">
    <div class="navcontainer header__inner">
      <a class="brand" href="/chrrybmbindigo/" aria-label="chrrybmb home">
        <img class="brand__logo-img" src="./assets/indigo_chrry_indypinky.svg" alt="chrrybmb logo"
             width="80" height="48" decoding="async" fetchpriority="high">
      </a>
      <nav class="nav" aria-label="Primary">
        <ul id="navMenu" class="nav__list">
          <li><a href="./index.html">Home</a></li>
          <li><a href="./work.html">Work</a></li>
          <li><a href="./about.html">About</a></li>
          <li><a href="./contact.html">Contact</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section class="resume-hero" aria-label="Intro">
    <div class="hero-inner">
      <h1 class="name-edge" data-text="resume">
        <span class="text">resume</span>
        <span class="warp" aria-hidden="true">resume</span>
        <span class="prism" aria-hidden="true">resume</span>
      </h1>
      <div class="resume-sub">Senior Brand & Web Designer</div>
    </div>
  </section>

  <!-- Card + PDF -->
  <main class="resume-wrap" role="main">
    <section class="card-iris">
      <div id="pdfScroller" class="pdf-scroller" data-pdf="./assets/denisa_moraru_resume_2025_indigo.pdf">
        <p class="loading" style="padding:12px;text-align:center">Loading resumeâ€¦</p>
      </div>

      <!-- Intentional toolbar layout -->
      <div class="resume-actions" role="toolbar" aria-label="Zoom and download controls">
        <span class="tool-group" aria-hidden="true">
          <button id="zoomOut" class="btn-pixel btn-pixel--ghost" type="button" aria-label="Zoom out">âˆ’</button>
          <button id="zoomIn"  class="btn-pixel btn-pixel--ghost" type="button" aria-label="Zoom in">+</button>
        </span>

        <span class="tool-group" aria-hidden="true">
          <button id="fitBtn" class="btn-pixel btn-pixel--ghost" type="button" aria-label="Fit to width">Fit</button>
          <button id="oneBtn" class="btn-pixel btn-pixel--ghost" type="button" aria-label="Actual size">100%</button>
        </span>

        <span class="tool-spacer" aria-hidden="true"></span>

        <a id="dlBtn" class="btn-pixel" href="./assets/denisa_moraru_resume_2025_indigo.pdf" download>Download PDF</a>
      </div>
    </section>

    <div class="resume-cta">
    <a class="btn-pixel" href="./index.html">home</a>
    </div>

  </main>

  <!-- Glass footer -->
  <footer class="glass-footer" role="contentinfo">
    <span class="dot" aria-hidden="true"></span>
    <span>Â© <span id="year"></span> chrrybmb.com / denisajomo.com</span>
  </footer>

  <!-- pdf.js (module build) with render + width-only observer -->
  <script type="module">
    import * as pdfjsLib from 'https://cdn.jsdelivr.net/npm/pdfjs-dist@4.8.69/build/pdf.mjs';
    pdfjsLib.GlobalWorkerOptions.workerSrc =
      'https://cdn.jsdelivr.net/npm/pdfjs-dist@4.8.69/build/pdf.worker.mjs';

    const scroller = document.getElementById('pdfScroller');
    const url = scroller.dataset.pdf + (scroller.dataset.pdf.includes('?') ? '&' : '?') + 'v=5';

    /* Start slightly smaller for breathing room */
    let zoom = 0.88;
    const MIN = 0.70, MAX = 2.0, STEP = 0.15;
    const DPR = Math.min(window.devicePixelRatio || 1.25, 2.0);
    let doc = null;

    let renderToken = 0, isRendering = false, needsRerender = false, lastWidth = 0, rafId = 0;

    function setProgress(){
      const p = (scroller.scrollTop / (scroller.scrollHeight - scroller.clientHeight)) * 100;
      scroller.style.setProperty('--prog', (isFinite(p)?p:0) + '%');
    }
    scroller.addEventListener('scroll', setProgress, {passive:true});

    function getScrollerWidth(){
      return Math.max(scroller.clientWidth||0, Math.floor(scroller.getBoundingClientRect().width)||0, 320);
    }

    async function loadDoc(){
      try{
        doc = await pdfjsLib.getDocument(url).promise;
      } catch (err){
        console.error('pdf.js failed, swapping to <object> embed.', err);
        injectObjectEmbed(url);
      }
    }

    async function render(){
      if(!doc){
        await loadDoc();
        if(!doc) return;
      }
      if (document.fonts && document.fonts.ready) { try { await document.fonts.ready; } catch(_){} }

      const w = getScrollerWidth();
      if (w < 200){ cancelAnimationFrame(rafId); rafId = requestAnimationFrame(render); return; }

      const myToken = ++renderToken;
      isRendering = true;
      scroller.innerHTML = '';

      for(let i=1;i<=doc.numPages;i++){
        if (myToken !== renderToken) { isRendering = false; return; }
        const page = await doc.getPage(i);
        const base = page.getViewport({ scale: 1 });
        const scale = (w / base.width) * zoom;
        const v = page.getViewport({ scale });

        const canvas = document.createElement('canvas');
        canvas.className = 'pdf-page';
        const ctx = canvas.getContext('2d', { alpha: false });
        canvas.width  = Math.floor(v.width  * DPR);
        canvas.height = Math.floor(v.height * DPR);
        canvas.style.width  = Math.floor(v.width)  + 'px';
        canvas.style.height = Math.floor(v.height) + 'px';

        await page.render({ canvasContext: ctx, viewport: v, transform: [DPR,0,0,DPR,0,0] }).promise;
        if (myToken !== renderToken) { isRendering = false; return; }
        scroller.appendChild(canvas);
      }
      isRendering = false;
      setProgress();
      if (needsRerender) { needsRerender = false; render(); }
    }

    const ro = new ResizeObserver((entries) => {
      const cr = entries[0] && entries[0].contentRect;
      if (!cr) return;
      const w = Math.round(cr.width);
      if (!w || w === lastWidth) return;
      lastWidth = w;

      if (isRendering) { needsRerender = true; return; }
      cancelAnimationFrame(rafId);
      rafId = requestAnimationFrame(render);
    });
    ro.observe(scroller);

    function applyZoom(z){
      const next = Math.max(MIN, Math.min(MAX, z));
      if(next === zoom) return;
      zoom = next; render();
    }
    document.getElementById('zoomIn').addEventListener('click', ()=> applyZoom(zoom + STEP));
    document.getElementById('zoomOut').addEventListener('click', ()=> applyZoom(zoom - STEP));
    document.getElementById('fitBtn').addEventListener('click', ()=> applyZoom(0.98));
    document.getElementById('oneBtn').addEventListener('click', ()=> applyZoom(1.0));

    window.addEventListener('load', () => render(), { once:true });

    function injectObjectEmbed(pdfUrl){
      scroller.innerHTML = '';
      const obj = document.createElement('object');
      obj.className = 'pdf-embed';
      obj.type = 'application/pdf';
      obj.data = pdfUrl + '#view=FitH&toolbar=0&navpanes=0&statusbar=0';
      obj.setAttribute('aria-label', 'Resume PDF');
      const timer = setTimeout(() => {
        try { if (!obj.contentDocument) showButtons(pdfUrl); } catch(_){ showButtons(pdfUrl); }
      }, 1200);
      obj.addEventListener('load', () => clearTimeout(timer));
      scroller.appendChild(obj);
    }
    function showButtons(pdfUrl){
      scroller.innerHTML = `
        <div class="pdf-fallback" style="padding:18px;text-align:center">
          <p class="loading">Canâ€™t display inline here.</p>
          <a class="btn-pixel" href="${pdfUrl}" target="_blank" rel="noopener">Open PDF</a>
          <a class="btn-pixel btn-pixel--ghost" href="${pdfUrl}" download>Download</a>
        </div>`;
    }
  </script>

  <script>
    // Orb background follow
    (function () {
      const target = document.documentElement;
      target.style.setProperty('--orb-x', '72%');
      target.style.setProperty('--orb-y', '68%');
      let raf = 0;
      function onPoint(e) {
        const t = e.touches ? e.touches[0] : e;
        const x = (t.clientX / window.innerWidth) * 100;
        const y = (t.clientY / window.innerHeight) * 100;
        if (raf) cancelAnimationFrame(raf);
        raf = requestAnimationFrame(() => {
          target.style.setProperty('--orb-x', x.toFixed(2) + '%');
          target.style.setProperty('--orb-y', y.toFixed(2) + '%');
        });
      }
      window.addEventListener('pointermove', onPoint, { passive: true });
      window.addEventListener('touchmove',   onPoint, { passive: true });
    })();
  </script>
</body>
</html>
